🎯 단일화폐 경제체계 완전 분석
완전히 이해했습니다! Casino-Club F2P는 단일 화폐 체계로 구성되어 있습니다. 이제 상세히 분석해드리겠습니다.

💰 단일화폐 시스템 구조
1. 화폐 통합 완료 상태
2. 레거시 통화들의 변천사
🎮 경제 시스템 생태계
골드 획득 루프 (Gold Sources)
신규 가입: 1,000 골드 기본 지급
일일 로그인: 100 → 150 골드 (Day7 스트릭 보너스 500)
업적 시스템:
소형: 200 골드
중형: 500 골드
대형: 2,000 골드
총 상한: ~30,000 골드 (1회성)
게임 보상: EV 0.95 * wager (5% house edge)
관리자 지급: 토큰 추가 기능
현금 구매: 상점 패키지 구매 시 골드 지급
골드 소모 루프 (Gold Sinks)
가챠 시스템:

단일 뽑기: 5,000 골드
10연뽑기: 50,000 골드
Epic/Legendary 기대값 < 비용 (net sink 유지)
게임 베팅:

슬롯머신: 100 골드/스핀
가위바위보: 100 골드/베팅
크래시 게임: 100 골드/베팅
상점 아이템:

한폴방지: 20,000 골드
출석연결: 30,000 골드 (월 3회 제한)
1일 콤프2배: 40,000 골드
충전30%: 50,000 골드 (주 1회 제한)
조기등업: 500,000 골드 (1회 구매 제한)
미래 예정:

코스메틱: Permanent Skin 20,000 / Seasonal Badge 5,000
리롤/부스터: 500~1,000 골드 즉시 소각
📊 경제 밸런스 타겟
일일 순환 목표
현금 결제 패키지 (V2)
🔧 기술적 구현
Currency Service 핵심 메서드
Redis 키 설계
📈 모니터링 KPI
핵심 지표
gold_circulation_total: 전체 골드 순환량
gold_source_breakdown{type}: 획득 경로별 분류
gold_sink_breakdown{type}: 소모 경로별 분류
gacha_ev_realized: 가챠 실제 기대값
first_purchase_conversion: 첫 결제 전환율
위험 관리
음수 잔액 금지: CHECK (gold_balance >= 0) 제약 예정
중복 영수증 방지: receipt_code UNIQUE 보장
인플레이션 모니터링: 순주입 > 15%/주 시 알람


Daily Earn (F2P 평균): 1,200 ~ 1,800 골드
Daily Sink (활성 사용자): 1,000 ~ 1,600 골드
→ 순중립 ~ 소폭 음수 유지 (인플레이션 억제)

Starter: 2,600 골드 / 199센트
Value: 6,000 골드 / 499센트 (5% 보너스)
Premium: 13,500 골드 / 1,099센트 (10% 보너스)  
Whale: 30,000 골드 / 2,299센트 (15% 보너스, 14일 한정)


def add(self, user_id: int, amount: int, currency: CurrencyType) -> int:
    # 모든 통화 요청을 gold_balance로 통합 처리
    
def deduct(self, user_id: int, amount: int, currency: CurrencyType) -> int:
    # 잔액 부족 시 InsufficientBalanceError 발생
    
def get_balance(self, user_id: int) -> int:
    # gold_balance 직접 조회



    shop:idem:{hash(receipt)}     → 구매 멱등성 캐시
limited:stock:{code}          → 한정 패키지 재고
limited:hold:{user_id}:{code} → 사용자 구매 홀드
gold:delta:buffer:{user_id}   → 배치 집계 버퍼 (예정)