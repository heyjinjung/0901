# Casino-Club F2P 인증 시스템 가이드

이 문서는 Casino-Club F2P 프로젝트의 인증 시스템에 대한 상세 정보를 제공합니다.

## 1. 회원가입

### 초대 코드 시스템
- **고정 초대 코드**: `5858`
- **특성**: 무한 재사용 가능
- **목적**: 테스트 및 개발 단계에서 간편한 사용자 등록

### 회원가입 요구사항
- **필수 정보**:
  - 아이디 (이메일 또는 사용자명)
  - 비밀번호 (4자리 이상)
  - 닉네임
  - 초대 코드

### 비밀번호 정책
- **최소 길이**: 4자리 이상
- **복잡성 요구사항**: 특별한 요구사항 없음 (개발 단계)
- **보안 고려사항**: 프로덕션 단계에서는 더 강력한 비밀번호 정책 적용 예정

## 2. 로그인

### 로그인 방식
- **자격증명 기반**: 아이디/비밀번호
- **토큰 기반**: JWT 토큰 사용

### JWT 토큰 정보
- **액세스 토큰 만료**: 1시간
- **리프레시 토큰 만료**: 7일
- **토큰 정보 포함 내용**: 사용자 ID, 역할, 발급 시간, 만료 시간

## 3. 토큰 관리

### 토큰 갱신 메커니즘
- **갱신 조건**: 액세스 토큰 만료 시 리프레시 토큰 이용
- **갱신 방식**: `/api/auth/refresh` 엔드포인트 사용
- **토큰 저장**: 브라우저 로컬 스토리지

### 로그아웃 처리
- **클라이언트 측**: 저장된 토큰 제거
- **서버 측**: 리프레시 토큰 블랙리스트에 추가

## 4. API 엔드포인트

### 회원가입 및 로그인
```
# 초대 코드 확인
POST /api/auth/verify-invite
{
  "inviteCode": "5858"
}

# 회원가입
POST /api/auth/signup
{
  "username": "사용자명",
  "password": "비밀번호",
  "nickname": "닉네임",
  "inviteCode": "5858"
}

# 로그인
POST /api/auth/login
{
  "username": "사용자명",
  "password": "비밀번호"
}
```

### 토큰 관리
```
# 토큰 갱신
POST /api/auth/refresh
{
  "refreshToken": "리프레시_토큰"
}

# 로그아웃
POST /api/auth/logout
Authorization: Bearer 액세스_토큰
```

## 5. 테스트 계정

### 개발 테스트용 계정
- **아이디**: test@casino-club.local
- **비밀번호**: test1234
- **권한**: 일반 사용자

### 관리자 계정
- **아이디**: admin@casino-club.local
- **비밀번호**: admin1234
- **권한**: 관리자

## 6. 오류 코드 및 메시지

### 초대 코드 관련
- `INVITE_CODE_INVALID`: 잘못된 초대 코드
- `INVITE_CODE_EXPIRED`: 만료된 초대 코드

### 인증 관련
- `INVALID_CREDENTIALS`: 잘못된 자격증명
- `USER_ALREADY_EXISTS`: 이미 존재하는 사용자
- `PASSWORD_TOO_WEAK`: 비밀번호 강도 불충분
- `TOKEN_EXPIRED`: 만료된 토큰
- `TOKEN_INVALID`: 유효하지 않은 토큰
- `REFRESH_TOKEN_INVALID`: 유효하지 않은 리프레시 토큰

## 7. 보안 고려사항

### 개발 환경
- 개발 환경에서는 간소화된 보안 정책 적용
- 초대 코드 `5858`은 개발 환경 전용

### 프로덕션 환경 대비
- 프로덕션 환경에서는 더 강력한 비밀번호 정책 적용 예정
- 초대 코드 시스템 개선 예정 (일회성, 사용자별 코드 등)
- HTTPS 필수 적용
- 토큰 보안 강화 (짧은 만료 시간, 서버 측 검증 강화)
