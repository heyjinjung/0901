

... (file continues, truncated here for brevity)
## 체크리스트 검증 방법
각 항목의 체크 방법은 다음과 같습니다:
- ✅ 완료: 기능이 구현되고, 테스트되었으며, 문서화됨
- ⚠️ 테스트 필요: 구현은 완료되었으나 테스트 및 문서화/ 개선이 필요함. 부분완료
- ❌ 미완료: 아직 시작되지 않음


## 검증 체크리스트
- [✅] 상품 카탈로그 관리: SKU/이름/가격/젬/할인/필요 등급 노출
- [✅] 격 정책 및 할인 시스템: 🏷️ 할인율 및 ⏱️ 종료시각에 따라 🧮 총액 계산
- [✅] 구매 전 검증(자격): VIP 전용 상품에 일반 사용자가 접근 시 403
- [✅] 결제 게이트웨이 연동: authorize 실패/성공, capture 실패/성공 처리
- [✅] 보상 지급: cyber_token_balance 증액
- [✅] 거래 로그: UserAction(action_type=SHOP_BUY) 및 charge_id 기록


### 진행상황 체크리스트
- [✅] **Alembic 마이그레이션 충돌 해결** (테이블 중복, 컬럼 충돌 등)
- [✅] 기존 테이블 중복(OperationalError) 해결
- [✅] 마이그레이션 히스토리 정리 및 초기화
- [✅] 스키마 정합성 검증

- [✅] **롤백/다운그레이드 정상 동작** (운영/테스트 환경 모두)
- [✅] PostgreSQL 환경에서 롤백 테스트 (downgrade -1 → upgrade 왕복 성공)
- [✅] SQLite 제약조건 우회 방안 (일부 롤백 불가, 테이블 recreate/백업 권장)
- [✅] 안전한 롤백 전략 문서화 (초안 추가 아래 참고)

- [✅] **마이그레이션 의존성/순서 정합성 확보**
- [✅] 마이그레이션 체인 검증 (alembic current/head 단일, history 점검)
- [✅] FK/제약조건 순서 정리 (일부 점검 필요)
- [✅] 의존성 그래프 문서화 (초안 추가 아래 참고)

- [✅] **운영/테스트 DB 환경 분리** 및 .env/컨테이너 분리
- [✅] .env.test 생성 (테스트 DB/시크릿 분리)
- [✅] docker-compose.test.yml로 테스트 DB 격리 기동 검증
- [✅] CI에서 .env.test 사용하여 alembic+pytest 실행 (GitHub Actions 추가)

- [✅] **Kafka/Zookeeper 컨테이너 정상 기동** 
- (docker-compose, 네트워크, 포트, 네임 충돌 해결)
- [⚠️] **FastAPI Kafka 연동** (aiokafka/kafka-python 연결 설정, 
- 실제 Producer/Consumer 연동) — Producer OK, Consumer pending
- 소비자 초기화 개선: 파티션 assignment 대기 후 seek-to-beginning 적용 메시지 유실 방지), 
  pytest 실행 시 thread 기반 소비자 강제 및 고유 consumer group 사용
- 프로듀서 전송 확인: 동기 전송(future.get) 및 메타데이터 로그(topic/partition/offset) 출력 추가
- [✅] **Kafka 연동 자동화 테스트/문서화** (pytest 통합 테스트, 운영/테스트 환경 분리)

### 작업 체크리스트
- [✅] backend/requirements.txt에 aiokafka(or kafka-python) 추가 (kafka-python/aiokafka 이미 포함)
- [✅] 설정: app.core.config.settings에 Kafka 설정 키 정의 (KAFKA_BOOTSTRAP_SERVERS, KAFKA_ENABLED)
- [✅] 서비스: KafkaProducer/KafkaConsumer 래퍼 모듈 1개만 사용 (app/kafka_client.py 재사용)
- [✅] 엔드포인트: /api/kafka/produce, /api/kafka/health 추가 (app/routers/kafka_api.py)
- [✅] pytest 통합 테스트: 브로커 없으면 skip (app/tests/test_kafka_integration.py)
- [✅] 라운드트립 테스트 추가(app/tests/test_kafka_roundtrip.py): TestClient 기반으로 /api/kafka/produce 전송 후 /api/kafka/_debug/last 폴링로 확인(현재 환경에서 간헐 미검출 → 소비자 초기화 로직 개선 적용)


### 1. 백엔드 (Backend)
#### 핵심 인프라
- [✅] FastAPI 프로젝트 초기화 및 구조화 (routers, services, repositories, schemas/models)
- 체크 방법: 컨테이너에서 서버 기동 시 /docs 엔드포인트 정상 노출 확인
- 검증 기준: 프로젝트 구조가 Clean Architecture 원칙을 따름
- 체크 대상: (검증 결과)
- [✅] 프로젝트 디렉토리 구조 (routers/, services/, repositories/, schemas/, models/ 등) 존재
- [✅] main.py 엔트리 포인트 존재 및 라우터 포함/미들웨어 설정
- [✅] config.py (app/core/config.py)와 docker-compose(.env.test 포함)로 환경 설정 일원화
- [✅] middleware 설정 (SimpleLoggingMiddleware, CORS) 적용, 커스텀 에러 핸들러는 보류
- [✅] 의존성 주입 설정 (get_db 등 DI 패턴 사용 가능; 라우터에서 Depends 활용)
- [✅] API 문서화 설정 (Swagger /docs, /redoc 경로 활성)
- [✅] PostgreSQL 연동 및 SQLAlchemy ORM 설정 (구조/연결/세션/엔진 정상)
- 체크 방법: alembic upgrade head 실행 및 DB 연결 테스트
- 검증 기준: 모델 CRUD 작업이 오류 없이 수행됨
- 체크 대상:
- [✅] database.py 설정 파일 (엔진/세션, Postgres/SQLite fallback)
- [✅] SQLAlchemy Base 및 SessionLocal 관리 (app.database.Base)
- [✅] 환경 변수: POSTGRES_* / DATABASE_URL 지원 (compose.test에서 주입)
- [✅] 연결 옵션/echo 설정 및 연결 성공 로그 출력
- [✅] 트랜잭션 스코프(get_db DI) 제공
- [✅] 기본 모델 클래스는 각 모델 모듈에서 Base 상속으로 일관 사용
  -  alembic upgrade head 시 기존 테이블 중복(OperationalError) 충돌 해결: 자동 테이블 정리 및 Alembic 마이그레이션 초기화 스크립트 적용 완료
  - 파일명: backend/scripts/reset_db_and_alembic.sh
  - 모든 테이블 삭제, 마이그레이션 히스토리 초기화, 새 마이그레이션 생성/적용 자동화
  - 실행 전 반드시 DB 백업 필수
  - 스크립트 실행 후 alembic upgrade head 정상 동작 확인됨


- [✅] Alembic 마이그레이션 구성 및 적용 (구성/경로/스크립트/메타데이터연동정상)
- 체크 방법: alembic revision --autogenerate 명령으로 새 마이그레이션 생성
- 검증 기준: 테이블 스키마 변경이 올바르게 적용됨
- 체크 대상:
- [✅] alembic.ini 설정 파일 존재
- [✅] migrations(versions/) 구성 및 리비전 다수 존재, 단일 head 유지
- [✅] env.py: app.models.Base 메타데이터 사용, POSTGRES_* 환경에서 URL구성
- [✅] 초기/후속 마이그레이션 스크립트 존재(merge 포함) 및 순서 정합
- [✅] 롤백 지원: Postgres에서 downgrade/upgrade 왕복 검증 완료(로그참조), 
  - SQLite 제한은 문서화
- [✅] 의존성 순서 점검 및 merge로 단일 head 유지(f79d04ea1016 이후 head=20250810_align_users)
  -  alembic upgrade head 시 기존 테이블 중복(OperationalError) 충돌 해결: 자동 테이블 정리 및 Alembic 마이그레이션 초기화 스크립트 적용 완료
  - 파일명: backend/scripts/reset_db_and_alembic.sh
  - 모든 테이블 삭제, 마이그레이션 히스토리 초기화, 새 마이그레이션 생성/적용 자동화
  - 실행 전 반드시 DB 백업 필수
  - 스크립트 실행 후 alembic upgrade head 정상 동작 확인됨
  - [참고] SQLite 환경에서 롤백(downgrade) 불가(OperationalError: NOT NULL 컬럼 추가 불가) → 개발 환경에서는 recreate/백업 전략 병행 필요
  - 마이그레이션 체인/의존성 순서는 정상이나, 다운그레이드 시 DBMS별 제약(특히 SQLite)로 일부 롤백 불가
  - [✅] 운영 DB(PostgreSQL) 실전 검증 완료: 마이그레이션/롤백/의존성 순서 정상 동작 확인(테스트 스택 기준)


### DB 인프라 개선/정합성 체크리스트

- ✅ Alembic 마이그레이션 충돌 해결 (테이블 중복, 컬럼 충돌 등)
- ✅ 롤백/다운그레이드 정상 동작 (운영/테스트 환경 모두)
- ✅ 마이그레이션 의존성/순서 정합성 확보
- ✅ 운영/테스트 DB 환경 분리 및 .env/컨테이너 분리
- ❌ 주요 테이블/인덱스/제약조건 설계 확정
- ✅ 트랜잭션/원자성/정합성 테스트
- ✅ 데이터 정합성 검증(샘플 데이터, CRUD, FK 등) — 기본 CRUD/FK 스모크 통과
- ⚠️ 백업/복구 전략 수립 및 테스트
- 메모: 컨테이너 내부 덤프/복구 스니펫
- 백업: `docker exec cc_postgres pg_dump -U cc_user -d cc_webapp > backup_cc_webapp_$(Get-Date -Format yyyyMMddHHmmss).sql`
- 복구(주의: 데이터 삭제): `docker exec -i cc_postgres psql -U cc_user -d cc_webapp < backup.sql`
- ✅ 마이그레이션/정합성 자동화 테스트 스크립트 작성 — CI Alembic history + downgrade(-1)/upgrade head 추가
- ✅ 개선/이슈/해결내역 문서화
- ✅ Kafka 연동 (이벤트/실시간 데이터 처리) — 최소 연결/라운드트립(피크) 스모크 완료
- 체크 방법: Producer/Consumer 테스트, 메시지 발행/구독 확인
- 검증 기준: 메시지 손실 없이 전달되는지 확인
- 체크 대상:
- ✅ Kafka 연결 설정
- ✅ 토픽 정의 및 생성 — auto-create + CI KAFKA_TEST_TOPIC=cc_test_ci
- ✅ Producer 구현 (사용자 행동, 보상 이벤트 등)
- ✅ Consumer 그룹 설정 — 고유 consumer group/pytest 격리
- ✅ 오류 처리 및 재시도 메커니즘
- ❌ 스키마 레지스트리 연동 (필요시)

### 다음 단계(2025-08-11)
- [✅] app/tests/test_invite_validate_api.py 작성 및 통과: 유효/만료/사용초과/미존재 코드 케이스 + 응답 포맷 검증
- [✅] InviteCode 모델↔DB 스키마 정합성 정리: expires_at/max_uses/used_count/created_by 필드 통일, Alembic 보강
- [✅] 라우터 최소 등급 의존성(require_min_rank) 구현 및 데모 엔드포인트 적용(+403/200 테스트)
- [⚠️] 백업/복구 스크립트(ps1) 및 간단 Runbook 섹션 추가

- [❌] JWT 인증 및 권한 관리 (초대코드/닉네임 기반, VIP/등급별 접근제어)
  - 체크 방법: 토큰 발급/검증 테스트, 보호된 엔드포인트 접근 시도
  - 검증 기준: 인증 헤더 없이 접근 시 401, 권한 없는 경우 403 반환
  - 체크 대상:
- [✅] JWT 인코딩/디코딩 기능 (AuthService.create_access_token/verify_token 구현, 테스트 통과)
- [✅] 토큰 발급 엔드포인트 (/api/auth/signup, /api/auth/login, /api/auth/admin/login)
- [✅] 만료 시간 설정 (JWT_EXPIRE_MINUTES 환경변수, 기본 30분)
- [✅] 토큰 리프레시 메커니즘 (/api/auth/refresh, Authorization Bearer 혹은 body.refresh_token 허용)
- [✅] 역할 기반 접근 제어 (RBAC) — require_min_rank 의존성 및 /api/rbac/premium, /api/rbac/vip 데모로 검증
- [✅] VIP/PREMIUM/STANDARD 등급별 권한 — 서비스의 check_rank_access 적용 및 테스트 보강 완료

- [❌] 테스트 코드(Pytest) 및 에러/로깅/문서화
  - 체크 방법: pytest -v 실행, 코드 커버리지 확인
  - 검증 기준: 핵심 기능 80% 이상 테스트 커버리지, 예외 처리 문서화
  - 체크 대상:
- [❌] 단위 테스트 (서비스, 리포지토리)
- [❌] 통합 테스트 (API 엔드포인트)
- [❌] 로깅 설정 (구조화된 로그)
- [❌] 에러 핸들링 미들웨어
- [❌] 사용자 정의 예외 클래스
- [❌] API 문서화 (OpenAPI/Swagger)


### 사용자 여정 1: 진입 및 등록
- [✅] 초대코드 유효성 검증 API (/api/invite/validate)
  - 체크 방법: 유효/만료/존재하지 않는 코드로 API 호출 
  - 검증 기준: 적절한 HTTP 상태 코드와 응답 메시지 반환 
  - 체크 대상: 코드는 고정값 5858 ✅ 테스트 완료 - 무한재사용 구현됨
- [✅] 유효성 검사 로직 — 다양한 케이스(유효/만료/사용초과/미존재) 테스트로 검증
- [✅] 만료 시간 검사 — expires_at 기준 비교로 동작 확인
- [✅] 사용 횟수 제한 검사 — None=무제한, 정수=남은횟수 계산 로직 검증
- [⚠️] 코드 보안 (예측 불가능성) — DEFAULT_INVITE_CODE 난수화 권장(운영 시 고정값 금지)
- [✅] 응답 포맷 (is_valid/error_message/code/expires_at/remaining_uses) — OpenAPI와 일치 검증
- 메모(2025-08-11): pytest.ini가 app/tests만 인식하므로 backend/tests 하 초대코드 테스트는 무시됨. app/tests/test_invite_validate.py 추가 필요. 또한 InviteCode 모델에 expires_at/max_uses/used_count 필드가 누락된 구현이 존재(simple_auth_models 등); 실제 DB/마이그레이션과 정합성 재검증 필요.

- [✅] 회원가입 API (POST /api/auth/signup)
  - 체크 방법: 유효한 초대코드와 닉네임으로 회원가입 시도
  - 검증 기준: 성공 시 사용자 생성 및 JWT 토큰 발급, 중복/오류 시 적절한 오류 응답 됨
- 체크 대상:
- [✅] 필수 필드 유효성 검사 (site_id, nickname, phone_number?, password, invite_code)
- [✅] 닉네임/아이디 중복 검사
- [✅] 초대코드 사용 처리 (현재 5858 고정 허용/무한재사용)
- [✅] 비밀번호 해싱(bcrypt)
- [❌] 초기 사용자 설정 (기본 등급/VIP/토큰 초기값 등 일부 값은 모델기본값,  정책 합의 필요)


- [✅] 회원가입 후 토큰 발급
- [✅] 로그인 API (POST /api/auth/login)
  - 체크 방법: 올바른/잘못된 site_id와 비밀번호로 로그인 시도
  - 검증/서비스에  기준: 인증 성공 시 JWT 토큰 발급, 실패 시 401 오류 
  - 체크 대상:
- [✅] 인증 로직 (site_id + password 기반)
- [✅] 로그인 시도 횟수 제한(락아웃): 최근 실패 5회 시 10분간 429 응답 (env: LOGIN_MAX_FAILED_ATTEMPTS, LOGIN_LOCKOUT_MINUTES)
- [✅] 최근 로그인 시간 업데이트
- [✅] 액세스 토큰 발급 (HS256, 만료는 환경변수 JWT_EXPIRE_MINUTES, 기본 30분)
- [✅] 리프레시 토큰 저장소 (DB) — 로그인/회원가입 시 refresh_token 발급 및 저장, /api/auth/refresh에서 검증/회전, /api/auth/logout(-all)에서 폐기
- [✅] 사용자 정보 응답 별칭 (GET /api/auth/me) — `/api/users/profile`과 동치

[✅] JWT 토큰 발급/갱신 API
  - 체크 방법: 만료된 토큰으로 갱신 요청, 유효한 토큰으로 보호된 API 접근
  - 검증 기준: 토큰 만료/갱신 메커니즘이 정상 작동 
  - 체크 대상:- [✅] 토큰 갱신 엔드포인트 (POST /api/auth/refresh) — Authorization Bearer 또는 { refresh_token } 본문 허용, 응답에 신규 access_token 반환
  - [✅] 유효기간 설정 — 환경변수 JWT_EXPIRE_MINUTES (기본 30분)
    - [✅] 토큰 블랙리스트 (구현 완료)
  - [✅] 토큰 검증 로직 (python-jose)
    - [✅] 동시 세션 관리 (구현 완료)
    - [✅] 강제 로그아웃 기능 (구현 완료)





- [✅] 사용자 정보 조회 API (GET /api/auth/me)
  - 체크 방법: JWT 토큰으로 보호된 엔드포인트 접근
  - 검증 기준: 유효한 토큰으로 사용자 정보 반환, 무효한 토큰은 401 오류 
  - 비고: `/api/users/profile`과 데이터 동치. 테스트로 상호 일치 확인.

    
### 사용자 여정 2: 메인 루프
- [✅] 프로필 조회 API (GET /api/users/profile, GET /api/auth/me; 타인: GET /api/users/{user_id})
  - 체크 방법: 자신/타인의 프로필 조회 시도, 인증 토큰 없이 접근 시도
  - 검증 기준: 본인 정보는 상세 조회, 타인 정보는 제한적 조회 또는 차단
  - 현재 상태: OpenAPI 기준으로 self 엔드포인트는 `/api/users/profile`이며, `/api/users/{id}/profile`는 노출되지 않음. `GET /api/auth/me`는 self와 동치. 타인 조회는 `GET /api/users/{user_id}`로 제한 정보 제공.
  - 체크 대상:
    - [✅] 권한 기반 정보 필터링 (본인/타인 구분 로직 구현)
    - [✅] 기본 사용자 정보 조회 (닉네임, 토큰, 랭크)
  - [✅] 활동 통계 계산 (/api/users/stats 집계 구현 완료)
  - [✅] 진행 중인 미션정보 (/api/missions, 인증 사용자 기준 목록/보상 수령 연동)
    - [✅] 보유 토큰/통화 정보 (사이버 토큰 조회 완료)
  - 완료된 작업:
    -  backend/app/routers/users.py: 프로필 API 구현 (Raw SQL 사용)
    -  권한별 데이터 필터링 로직 (본인/타인 구분)
    -  기본 사용자 정보 조회 (ID, 닉네임, 토큰, 랭크)
    -  프론트엔드 컴포넌트 정리 (중복 제거, ProfileHeader 통합)
    -  API 응답 구조 정의 및 테스트 완료
  - 테스트 결과:
    -  GET /api/users/profile → 200 OK (self)
    -  GET /api/auth/me → 200 OK (self와 동치)
    -  GET /api/users/{user_id} → 200 OK (타인 제한 정보), 무인증 접근 시 401


    -  중복 컴포넌트 정리 (ModernProfileHeader 제거)
  - 향후 개선사항:
    - [✅] 상세 활동 통계 계산 구현 (/api/users/stats: UserAction/GameStats 집계 기반)
    - [✅]  미션 진행도 API 연동 (/api/missions, /api/missions/{id}/claim에 인증 연동)
    - [✅] 타인 프로필 조회 시 제한적 정보 필터링 (PublicUserResponse 스키마 도입)
    - [✅] 인증 토큰 기반 접근 제어 강화 (missions 라우터에 get_current_user 적용)

    구현 포인트:
    - backend/app/services/user_service.py: get_user_stats 고도화(집계 계산, win_rate 등)
    - backend/app/routers/missions.py: 하드코딩된 user_id 제거→get_current_user로 교체
    - backend/app/schemas/user.py: PublicUserResponse 추가(타인 제한 정보)
    - backend/app/routers/users.py: GET /api/users/{user_id} 응답을 UserResponse|PublicUserResponse로 분기


- [✅] 슬롯 게임 API (POST /api/actions/SLOT_SPIN)
  - 체크 방법: 연속 스핀 시도, 확률 분포 검증을 위한 대량 요청 테스트
  - 검증 기준: 스트릭 카운트 증가, 변동 비율 보상 로직 정상 동작
  - 체크 대상:
  - [✅] 슬롯 스핀 확률 테이블 (app.core.config.settings.SLOT_SYMBOL_WEIGHTS로 외부화)
  - [✅] 스트릭/연속 보상 메커니즘 (Redis streak 카운터 + 승리 보너스 최대 +20%, ±5% 변동)
  - [✅] 결과 결정 알고리즘 (심볼 가중치 기반 3릴 + 페어/트리플 승리 판정)
  - [✅] 랜덤 생성기 품질 (Python random 사용; CI 시드 고정 검토)
  - [✅] 보상 지급 연동 (베팅 차감/승리금 반영)
  - [✅] 사용자 액션 로깅 (SLOT_SPIN, streak 포함)

- 추가 테스트:
- [✅] test_slot_distribution_sanity.py (300회 샘플 분포 및 평균 승리 추세 스모크)

- [✅]가챠 스핀 API (POST /api/games/gacha/pull)
- 체크 방법: 다양한 등급의 아이템 드롭 확률 테스트 (1000회 이상 시뮬레이션)
- 검증 기준: 확률 분포가 설정값의 ±5% 이내, 로그 정확히 기록
- 체크 대상:
- [✅] 등급별 아이템 확률 테이블 (Legendary/Epic/Rare/Common + Near_Miss 변형; service DEFAULT_RARITY_TABLE 및 환경변수 오버라이드)
- [✅] 천장/보장 메커니즘 (90회 실패 시 Epic 보장, animation_type=pity)
- [✅] 가챠 비용 차감 로직 (1뽑 50, 10뽑 450 할인)
- [✅] 아이템 지급 로직 (near_miss 매핑 후 실제 rarity로 지급)
- [✅] 확률 공개 정보 (/api/games/gacha/config)
- [✅] 가챠 결과 히스토리 (/api/games/gacha/stats + UserAction 로그에 결과/연출 기록)
- 테스트 허용오차: ±5% (테스트 내 random.seed 고정)

 [⚠️] 보상 지급 API (POST /api/rewards)
 - 체크 방법: 다양한 보상 유형 지급 테스트, 동시 다수 요청 처리 테스트
 - 검증 기준: 사용자 잔액/인벤토리 정확히 업데이트, 중복 지급 방지
 - 체크 대상:
- [✅] 보상 유형별 처리 (코인, 젬, 아이템) — TOKEN/COIN 통화 반영, ITEM 기록
- [✅] 트랜잭션 처리 (원자성) — Reward + UserReward 동시 커밋, 오류 시 롤백
- [✅] 중복 지급 방지 (idempotency) — UserAction(REWARD_GRANT + idempotency_key)로 재시도 안전
- [✅] 보상 히스토리 기록 — GET /api/rewards/users/{user_id}/rewards 페이지네이션, claimed_at 기준 정렬\
- [⚠️] 특별 보상 처리 (이벤트, 프로모션) — 범위 확장 시 추가 모델링 예정
- [✅] 알림 연동 (보상 지급 알림) — WebSocket best-effort 개인 알림 전송

검증 메모(2025-08-12):
- app/tests/test_rewards_distribution.py 2건 PASS. 목록 API는 UserReward↔Reward 조인으로 RewardItem(reward_id, reward_type, reward_value, awarded_at=claimed_at) 형태 반환하도록 수정.


### 사용자 여정 3: 개인화 및 유지

- [✅] 실시간 알림 API (SSE/WebSocket)
  - 체크 방법: 클라이언트 연결 유지 테스트, 다중 클라이언트 시나리오
  - 검증 기준: 연결 끊김 없이 실시간 메시지 전송, 재연결 메커니즘 작동
  - 체크 대상:
- [✅] 연결 관리 및 세션 유지 (per-user multi-connection manager)
- [✅] 메시지 큐 및 버퍼링 (오프라인 인메모리 큐, 재연결 시 flush)
- [✅] 사용자별 알림 필터링 (user_id 라우트 + personal send)
- [✅] 연결 끊김 감지 및 재연결 (클라이언트 지민 백오프 reconnect)
- [✅] 멀티플렉싱 지원 (한 사용자 다중 소켓, broadcast/personal)
- [✅] 알림 우선순위 및 배치 처리 (기본 send_bulk 지원)


검증 메모(2025-08-13):
- WS: /ws/notifications/{user_id}, HTTP push: POST /ws/notify/{user_id}?message=...
- SSE(옵션): /ws/sse/notifications keepalive 스트림
- FE 데모: /notifications 페이지에서 자동 재연결 및 실시간 수신 확인
- [⚠️] 사용자 행동 로깅 API (POST /api/actions)
- 체크 방법: 다양한 action_type으로 로그 기록, 대량 로그 처리 테스트
- 검증 기준: 모든 행동이 시간/유형/컨텍스트와 함께 정확히 기록
- 체크 대상:
  - [✅] 액션 타입 분류 체계 (SLOT_SPIN, GACHA_SPIN, LOGIN, REWARD_GRANT 등)
  - [✅] 로그 데이터 구조 설계 — action_data(JSON): user_id, action_type, client_ts, context(scrubbed), server_ts
  - [✅] 대용량 로그 처리 최적화 — /api/actions/bulk 일괄 로깅, Kafka 비동기 퍼블리시(옵션)
  - [⚠️] 실시간 행동 분석 파이프라인 — Kafka→OLAP 연동은 다음 단계
  - [✅] 개인정보 보호 필터링 — password/phone/email 키 자동 제거
  - [⚠️] 로그 압축 및 아카이빙 — 장기보관/압축은 후속 작업


### 사용자 여정 4: 전환 및 수익화
- [✅] 상점/프리미엄 잼 구매 API (POST /api/shop/buy)
  - 체크 방법: 다양한 금액/상품 구매 시나리오, 결제 실패 케이스 테스트
  - 검증 기준: 결제 처리 완료 후 아이템/젬 정확히 지급, 트랜잭션 로그 기록
  - 체크 대상:
- [✅] 상품 카탈로그 관리
- [✅] 가격 정책 및 할인 시스템
- [✅] 구매 전 검증 (자격)
- [✅] 결제 게이트웨이 연동
- [✅] 구매 완료 후 보상 지급
- [🚫] 영수증 발행 및 기록 — 스코프 아웃(개발 대상 제외)

- [✅] 한정 패키지 API
  - 체크 방법: 기간 제한 패키지 구매, 만료된 패키지 접근 시도
  - 검증 기준: 패키지 가용성 정확히 제어, 구매 제한 적용
  - 체크 대상:
- [✅] 시간 제한 패키지 스케줄링
- [✅] 수량 제한 재고 관리
- [✅] 사용자별 구매 제한
- [✅] 패키지 내용물 관리
- [✅] 프로모션 코드 시스템
- [✅] 긴급 패키지 비활성화 기능



### 관리자 기능
### 관리자 기능
- [✅] 회원 관리 API (목록, 상세, 등급/상태 변경, 삭제, 로그)
  - 체크 방법: 관리자/일반 사용자 권한으로 접근 시도, CRUD 작업 테스트
  - 검증 기준: 권한에 따른 접근 제어, 변경 사항 즉시 반영 및 로그 기록

- [✅] 보상/아이템 관리 API
  - 체크 방법: 아이템 생성/수정/삭제, 확률 조정 테스트
  - 검증 기준: 아이템 속성/확률 변경 즉시 게임에 반영

 키무, [2025-07-29 오전 8:18]
- [✅] 알림/캠페인 관리 API
  - 체크 방법: 알림 생성/예약/취소, 타겟팅 테스트
  - 검증 기준: 예약된 시간에 정확히 발송, 세그먼트 타겟팅 정확성
  


## 2. 프론트엔드 (Frontend)
### 기반 설정


- [ ] 반응형/접근성/SEO 최적화
  - 체크 방법: 다양한 화면 크기 테스트, Lighthouse 점수 확인
  - 검증 기준: 모바일/태블릿/데스크탑에서 레이아웃 유지, 접근성 90+ 점수


### 사용자 여정 1: 진입 및 등록
- [ ] 랜딩 페이지 (Hero Section, 애니메이션, 네온 효과)
  - 체크 방법: 다양한 브라우저/기기에서 페이지 로드, 스크롤 애니메이션 테스트
  - 검증 기준: 3초 이내 초기 로드, 애니메이션 프레임 드롭 없음

- [ ] 초대코드 입력 화면 (효과, 유효성 검사)
  - 체크 방법: 다양한 입력 시나리오(유효, 만료, 오타 등) 테스트
  - 검증 기준: 즉각적인 시각/텍스트 피드백 제공, 입력 상태에 따른 UI 변화

- [ ] 회원가입/로그인 모달 (닉네임, 초대코드 기반)
  - 체크 방법: 모달 열기/닫기, 폼 제출, 오류 케이스 테스트
  - 검증 기준: 폼 유효성 검사, 서버 응답에 따른 적절한 피드백 표시

- [ ] 온보딩 튜토리얼 (게임/보상 소개)
  - 체크 방법: 튜토리얼 전체 플로우 테스트, 건너뛰기 옵션 확인
  - 검증 기준: 단계별 진행이 명확하고 직관적, 필수 정보 모두 포함


### 사용자 여정 2: 메인 루프
- [ ] 홈 대시보드 (유저 상태, 보유 아이템, 보상 미리보기)
  - 체크 방법: 다양한 사용자 상태(신규/VIP/높은 레벨 등)에서 대시보드 렌더링
  - 검증 기준: 모든 사용자 정보/상태 정확히 표시, 중요 정보 강조 표시

- [ ] SlotMachineComponent (스핀, 애니메이션, 사운드)
  - 체크 방법: 연속 스핀, 승리/패배 시나리오, 음소거 모드 테스트
  - 검증 기준: 애니메이션 부드러움, 사운드 적절히 재생, 결과 명확히 표시

- [ ] GachaSpinComponent (확률, 소셜 증명, 애니메이션)
  - 체크 방법: 다양한 등급의 아이템 획득 시나리오 테스트
  - 검증 기준: 희귀 아이템 획득 시 특별 애니메이션/효과, 소셜 증명 요소 표시

- [ ] 피드백 알림 시스템 (토스트, 캐릭터 대화)
  - 체크 방법: 다양한 알림 트리거 테스트, 동시 다발적 알림 케이스
  - 검증 기준: 알림 우선순위 적용, 겹침 없이 표시, 적절한 지속 시간



### 사용자 여정 3: 개인화 및 유지
- [ ] 개인화된 추천 UI
  - 체크 방법: 다양한 세그먼트 사용자로 로그인하여 추천 내용 확인
  - 검증 기준: 세그먼트별 차별화된 추천 표시, 클릭 시 해당 기능으로 이동
  - 체크 대상:
    - [ ] 세그먼트별 추천 카드 레이아웃
    - [ ] 사이버 토큰 미션 추천 표시
    - [ ] 보상 제안 UI
    - [ ] 추천 우선순위 시각화
    - [ ] 추천 새로고침 기능
    - [ ] 추천 피드백 수집 (유용함/아님)

- [ ] 알림 배너/센터 (실시간, 예정된 이벤트)
  - 체크 방법: 다양한 알림 유형 수신 테스트, 알림 센터 기능 확인
  - 검증 기준: 실시간 알림 표시, 읽음/안읽음 상태 관리, 알림 히스토리
  - 체크 대상:
    - [ ] 실시간 알림 배너 (토스트)
    - [ ] 알림 센터 UI
    - [ ] 알림 분류 및 필터링
    - [ ] 읽음 상태 관리
    - [ ] 알림 설정 페이지
    - [ ] 푸시 알림 권한 요청 UI


- [ ] 스트릭/연속 보상 표시
  - 체크 방법: 연속 로그인/플레이로 스트릭 증가 확인, 보상 지급 테스트
  - 검증 기준: 스트릭 카운트 정확성, 보상 예상치 표시, 중단 시 초기화
  - 체크 대상:
    - [ ] 스트릭 카운터 UI
    - [ ] 연속 로그인 달력
    - [ ] 다음 보상 미리보기
    - [ ] 스트릭 레벨별 혜택 표시
    - [ ] 스트릭 보호 아이템 (있을 경우)
    - [ ] 스트릭 복구 옵션

### 사용자 여정 4: 전환 및 수익화
- [ ] ShopComponent (프리미엄 잼, 한정 패키지)
  - 체크 방법: 다양한 상품 구매 플로우 테스트, 결제 모달 확인
  - 검증 기준: 상품 정보 정확 표시, 결제 프로세스 완료, 구매 확인 알림
  - 체크 대상:
    - [ ] 상품 카탈로그 표시
    - [ ] 가격 및 할인 정보 표시
    - [ ] 상품 상세 정보 모달
    - [ ] 구매 버튼 및 수량 선택
    - [ ] 장바구니 기능 (필요시)
    - [ ] 구매 히스토리 페이지



키무, [2025-07-29 오전 8:18]
- [ ] VIP 혜택/업그레이드 UI
  - 체크 방법: 등급별 혜택 표시 확인, 업그레이드 조건 및 프로세스 테스트
  - 검증 기준: 현재 등급 표시, 다음 등급 조건 명시, 혜택 비교 표시
  - 체크 대상:
    - [ ] 현재 VIP 등급 표시
    - [ ] 등급별 혜택 비교표
    - [ ] 업그레이드 진행률 바
    - [ ] VIP 전용 콘텐츠 표시
    - [ ] 등급 기간 및 갱신 정보
    - [ ] VIP 배지 및 시각적 효과

- [ ] 결제 모달 (안전하고 매력적인 UI)
  - 체크 방법: 다양한 결제 수단 선택, 보안 요소 확인, 결제 완료 플로우
  - 검증 기준: 보안 정보 표시, 결제 진행 상태 표시, 오류 처리 안내
  - 체크 대상:
    - [ ] 결제 수단 선택 인터페이스
    - [ ] 보안 인증서 표시
    - [ ] 결제 진행 상태 표시
    - [ ] 에러 메시지 및 재시도 옵션
    - [ ] 결제 완료 확인 페이지
    - [ ] 영수증 다운로드/이메일 발송


## 3. EPI (외부 연동/통합)
### 알림 및 커뮤니케이션
- [ ] 이메일 서비스 연동 (회원가입, 보상, 이벤트)
  - 체크 방법: 각 유형의 이메일 발송 테스트, 다양한 이메일 클라이언트 확인
  - 검증 기준: 이메일 전송 성공률 99%+, HTML/텍스트 형식 모두 정상 표시

- [ ] 푸시 알림 서비스 연동 (모바일, 웹)
  - 체크 방법: 토큰 등록/해제, 다양한 기기/브라우저에서 알림 수신 테스트
  - 검증 기준: 타이밍/내용 정확히 전달, 사용자 권한 설정 반영

- [ ] SSE/WebSocket 실시간 알림 연동
  - 체크 방법: 연결 유지 테스트(30분+), 네트워크 중단/재연결 시나리오
  - 검증 기준: 연결 안정성, 메시지 손실 없음, 효율적인 재연결 메커니즘

- [ ] 알림 템플릿 및 개인화 로직
  - 체크 방법: 다양한 사용자 세그먼트/행동 기반 알림 생성
  - 검증 기준: 사용자 컨텍스트에 따른 적절한 메시지/콘텐츠 포함

### 결제 및 보안


- [ ] 결제 검증 및 보안 처리
  - 체크 방법: 위변조된 결제 정보/승인 시도, 중복 결제 시나리오 테스트
  - 검증 기준: 모든 사기 시도 차단, 민감 데이터 암호화 확인

- [ ] 결제 오류 복구 메커니즘
  - 체크 방법: 네트워크 중단, 서버 오류 등 다양한 실패 시나리오 재현
  - 검증 기준: 자동 재시도, 미완료 트랜잭션 해결, 사용자 안내 메시지

### 데이터 및 분석
- [ ] 실시간 데이터 스트리밍 파이프라인 (Kafka, ClickHouse)
- [ ] 모니터링/분석 도구 연동 (Grafana, Metabase)
- [ ] A/B 테스트 프레임워크 연동
- [ ] 사용자 행동 분석 도구

### 외부 서비스 통합
- [ ] 외부 게임 API 연동 (필요시)
- [ ] 소셜 공유 기능 연동
- [ ] 서드파티 SDK 통합 (필요시)
- [ ] Company A 서비스 연동 (사이버 토큰)

## 4. 데이터베이스 (Database)
### 핵심 테이블 및 구조
- [ ] users 테이블 (id, nickname, email, password_hash, created_at, vip_tier, battlepass_level, total_spent)
- [ ] user_segments 테이블 (id, user_id, rfm_group, ltv_score, risk_profile, last_updated)
- [ ] user_actions 테이블 (사용자 행동 기록)
- [ ] user_rewards 테이블 (보상 지급 기록)
- [ ] gacha_log 테이블 (가챠 결과 기록)
- [ ] shop_transactions 테이블 (구매 내역)

### 성능 및 안정성
- [ ] 적절한 인덱스 설정 (접근 패턴 기반)
- [ ] 쿼리 최적화 및 성능 테스트
- [ ] 데이터베이스 보안 설정 (접근 제어)
- [ ] 백업 및 복구 전략 구현
- [ ] 테스트 데이터 생성

### 데이터 무결성 및 분석
- [ ] 트랜잭션 관리 및 데이터 일관성
- [ ] 외래 키 제약 조건 및 정합성 검증
- [ ] 사용자 세그먼트 분석 (RFM 모델)
- [ ] 리스크 프로필 및 LTV 스코어 계산
- [ ] 실시간 데이터 업데이트 (Redis 캐시 활용)

### 데이터 마이그레이션
- [ ] Alembic 마이그레이션 스크립트
- [ ] 마이그레이션 테스트 및 검증
- [ ] 롤백 전략 및 비상 복구 계획
- [ ] 데이터 마이그레이션 가이드 문서화

## 5. 구입/서버 연동 (Purchase/Server Integration)
### 상점 및 결제 시스템
- [ ] 상점 상품 관리 및 표시 (Premium Gem, 패키지)
- [ ] 구매 로직 구현 (POST /api/shop/buy)
- [ ] 화폐 시스템 구현 (Regular Coins, Premium Gems)
- [ ] 한정 패키지 및 프로모션 관리

### 외부 결제 통합
- [ ] 외부 결제 서버 API 연동
- [ ] 결제 검증 및 보안 처리
- [ ] 웹훅/콜백 처리
- [ ] 결제 상태 추적 및 관리

### 트랜잭션 및 보상
- [ ] 구매 내역 기록 (shop_transactions)
- [ ] 구매 후 보상 지급 프로세스
- [ ] 가상화폐 잔액 관리 (Redis 캐시)
- [ ] 트랜잭션 일관성 및 동시성 제어

### 예외 처리 및 모니터링
- [ ] 결제 실패/취소/환불 처리 로직
- [ ] 트랜잭션 로그 및 감사
- [ ] 구매 패턴 모니터링 및 이상 감지
- [ ] 결제 관련 고객 지원 도구

---

## 6. 사용자 여정 단계별 통합 체크리스트
### 여정 1: 온보딩 및 첫 경험
- [ ] 랜딩 페이지 → 초대코드 → 회원가입 → 튜토리얼 흐름
- [ ] 첫 보상 및 성취 경험
- [ ] 네온 애니메이션 효과로 시각적 만족감
- [ ] 첫 게임 메커니즘 소개 (슬롯/가챠)
- [ ] 배틀패스/VIP 시스템 소개

### 여정 2: 참여 유도 및 습관화
- [ ] 일일/주간 보상 시스템
- [ ] 스트릭/연속 로그인 인센티브
- [ ] 게임 콘텐츠 확장 및 다양화
- [ ] 배틀패스 진행 시각화
- [ ] 소셜 증명 및 경쟁 요소

### 여정 3: 개인화 및 몰입
- [ ] RFM 세그먼트 기반 개인화 추천
- [ ] 사이버 토큰 소비/획득 미션
- [ ] 심리 퀴즈 기반 맞춤형 경험
- [ ] 알림을 통한 재참여 유도
- [ ] 사용자 행동 기반 피드백 강화

### 여정 4: 수익화 및 가치 제공
- [ ] 프리미엄 젬 구매 동기 부여
- [ ] 성인 콘텐츠 단계별 해금 경험
- [ ] VIP 등급 업그레이드 경로
- [ ] 한정 패키지 및 특별 프로모션
- [ ] 충성도 보상 및 혜택

### 여정 5: 유지 및 확장
- [ ] 이탈 방지 재참여 전략
- [ ] 신규 콘텐츠 및 기능 업데이트
- [ ] 커뮤니티 활동 및 상호작용
- [ ] 고객 피드백 수집 및 개선
- [ ] 장기 참여자 특별 혜택


---
**결론:**
- Casino-Club F2P 백엔드의 Kafka 실시간 메시징 인프라가 완전히 검증됨
- 실서비스 연동 및 확장에 적합한 구조로 안정화 완료

- [ ] 피드백 API (GET /api/feedback)
  - 체크 방법: 다양한 action_type으로 피드백 요청
  - 검증 기준: 감정 기반 피드백 메시지와 애니메이션 키 반환
  - 체크 대상:
    - [ ] 액션 유형별 피드백 매핑
    - [ ] 다국어 지원 (필요시)
    - [ ] 감정 기반 메시지 다양성
    - [ ] 애니메이션 키 및 효과 설정
    - [ ] 맥락 인식 메시지 (연속 액션)
    - [ ] A/B 테스트 지원 (다양한 피드백 스타일)

- [ ] 외부 결제 게이트웨이 연동 (Premium Gem)
  - 체크 방법: 다양한 결제 수단/금액으로 테스트 거래, 샌드박스 모드 검증
  - 검증 기준: 결제 프로세스 완료율 99.5%+, 평균 처리 시간 3초 이내
  - 체크 대상:
    - [ ] 결제 게이트웨이 API 통합
    - [ ] 다양한 결제 수단 지원 (신용카드, 가상계좌, 페이앱)
    - [ ] 결제 요청/응답 처리
    - [ ] 웹훅/콜백 처리
    - [ ] 결제 상태 추적
    - [ ] 에러 핸들링 및 재시도 메커니즘

- [ ] AdultContentStageComponent (Teaser, 부분 공개, 전체 공개)
  - 체크 방법: 각 단계별 콘텐츠 표시 확인, 해금 프로세스 테스트
  - 검증 기준: 단계별 적절한 콘텐츠 표시, 해금 조건 명시, 나이 제한 안내
  - 체크 대상:
    - [ ] 나이 확인 모달
    - [ ] 단계별 콘텐츠 미리보기
    - [ ] 해금 조건 표시 (토큰, 등급)
    - [ ] 해금 버튼 및 확인 모달
    - [ ] 콘텐츠 잠금/해제 상태 표시
    - [ ] 법적 고지사항 표시

 [ ] 유저 세그먼트 계산/업데이트 API (APScheduler)
  - 체크 방법: 배치 작업 실행 후 user_segments 테이블 변경 확인
  - 검증 기준: RFM 그룹이 사용자 행동에 따라 올바르게 분류됨
  - 체크 대상:
    - [ ] RFM 분석 알고리즘 (Recency, Frequency, Monetary)
    - [ ] 세그먼트 분류 로직 (Whale, High Engaged, Medium, Low/At-risk)
    - [ ] 배치 작업 스케줄링 (일일/주간 실행)
    - [ ] 성능 최적화 (대용량 사용자 처리)
    - [ ] 세그먼트 변경 히스토리 추적
    - [ ] 세그먼트 기반 타겟팅 로직

- [ ] 개인화 추천 API (GET /recommend/personalized)
  - 체크 방법: 다양한 세그먼트/리스크 프로필을 가진 사용자로 요청
  - 검증 기준: 세그먼트별 차별화된 추천 결과 반환
  - 체크 대상:
    - [ ] 세그먼트별 추천 규칙 엔진
    - [ ] 사이버 토큰 기반 미션 추천
    - [ ] 보상 제안 알고리즘
    - [ ] 리스크 프로필 기반 개인화
    - [ ] 추천 결과 랭킹 시스템
    - [ ] 추천 효과 추적 및 학습

- [ ] 심리 측정 퀴즈 제출/분석 API (POST /api/quiz/submit)
  - 체크 방법: 다양한 답변 패턴으로 퀴즈 제출
  - 검증 기준: 리스크 점수 계산 및 프로필 업데이트 정확성
  - 체크 대상:
    - [ ] 다단계 퀴즈 플로우
    - [ ] 심리 측정 모델 (위험 성향, 보상 반응성)
    - [ ] 점수 계산 알고리즘
    - [ ] 결과 해석 및 분류
    - [ ] 프로필 업데이트 로직
    - [ ] 퀴즈 결과 기반 개인화 적용

- [ ] VIP 등급 업그레이드 API
  - 체크 방법: 등급별 업그레이드 요건 충족/미충족 시나리오
  - 검증 기준: 등급에 따른 혜택 적용, 업그레이드 히스토리 기록
  - 체크 대상:
    - [ ] 등급별 요구 조건 정의 (소비 금액, 활동 점수)
    - [ ] 자동/수동 업그레이드 로직
    - [ ] 등급별 혜택 설정 (할인율, 전용 콘텐츠)
    - [ ] 등급 다운그레이드 정책
    - [ ] VIP 전용 기능 접근 제어
    - [ ] 등급 변경 알림 시스템---

 [ ] 심리 측정 퀴즈 UI (다단계 질문)
  - 체크 방법: 전체 퀴즈 플로우 완주, 다양한 답변 패턴 테스트
  - 검증 기준: 진행률 표시, 결과 페이지 표시, 결과 기반 개인화 적용
  - 체크 대상:
    - [ ] 단계별 질문 표시
    - [ ] 진행률 바 및 페이지네이션
    - [ ] 답변 선택 인터페이스
    - [ ] 결과 분석 및 시각화
    - [ ] 퀴즈 재시도 옵션
    - [ ] 결과 공유 기능


### 6. 구현 우선순위

#### Phase 1: 기본 게임 통계 (1-2주)
- [ ] 게임 세션 테이블 생성
- [ ] 기본 게임 통계 API 구현
- [ ] ProfileStats에 게임 데이터 연동
- [ ] 실시간 토큰 잔액 업데이트

#### Phase 2: 상세 게임 데이터 (2-3주)
- [ ] 게임별 상세 통계 구현
- [ ] 게임 핸드 데이터 저장
- [ ] 승률, 수익률 계산 로직
- [ ] 게임 히스토리 조회 기능

#### Phase 3: 실시간 기능 (3-4주)
- [ ] WebSocket 연동
- [ ] 실시간 게임 세션 모니터링
- [ ] 라이브 통계 업데이트
- [ ] 푸시 알림 연동

#### Phase 4: 업적 및 보상 (4-5주)
- [ ] 업적 시스템 구현
- [ ] 배지 및 보상 UI
- [ ] 리더보드 기능
- [ ] 소셜 기능 (친구, 공유)

## 관리자 기능 점검 결과 (요약)

검증 일시: 2025-08-14

검증 대상 항목:
- 회원 관리 API
- 보상/아이템 관리 API
- 알림/캠페인 관리 API

요약 결과:
- 회원 관리 API: 부분 구현 및 검증 필요
  - 상태: 일부 엔드포인트(목록/상세/등급 변경)는 구현되어 있으나, 관리자 권한 검증 테스트가 일부 누락되어 있음.
  - 확인 방법: 관리자/일반 사용자 자격으로 CRUD 요청을 수행하여 401/403/200 상태를 검증할 필요 있음.
  - 권장 조치: app/tests에 관리자 권한 시나리오(관리자 토큰으로의 CRUD, 일반 토큰으로 거부)를 추가하고 자동화할 것.

- 보상/아이템 관리 API: 구현됨, 운영 테스트 권장
  - 상태: 아이템 CRUD, 확률 테이블 및 지급 로직은 구현되어 있으며 가챠/스핀 서비스와 연동됨.
  - 확인 방법: 아이템 생성/수정/삭제 후 즉시 가챠 스핀 시 결과 반영 여부를 대량 시뮬레이션(예: 1000회)으로 검증.
  - 권장 조치: 확률 변경시 운영 반영을 보장하도록 캐시 무효화(예: Redis 키) 및 알림(운영 로그)을 추가.

- 알림/캠페인 관리 API: 부분 미구현/검증 대기
  - 상태: 알림 전송(개별/실시간)은 구현되어 있으나, 예약/타겟팅 대시보드 연동 및 예약 큐(스케줄러) 테스트가 부족함.
  - 확인 방법: 예약 생성 → 예약 시점에 전송 확인, 세그먼트 타겟팅 정확성 확인.
  - 권장 조치: APScheduler/Celery beat 기반 예약 파이프라인의 E2E 테스트 추가.

실제 작동 여부 확인 요약:
- 주요 엔드포인트(보상, 가챠, 슬롯, 회원가입, 로그인, /health)는 컨테이너 환경에서 수동 및 자동 스모크 테스트로 확인됨.
- 일부 관리자 전용 흐름은 통합 테스트가 부족하여 수동 검증이 권장됨.

현재 이슈 및 주의사항:
- 프론트엔드 빌드/런타임 상태: `cc-webapp/frontend`는 TypeScript/Next 빌드(Next 15, React 19)에서 많은 타입 에러가 해결되어 현재 `npm run build`가 성공하지만, 런타임에서 dev-only dynamic import(`../mocks/browser`) 누락으로 인해 컨테이너에서 500이 발생한 이력이 있음.
  - 조치: 동적 import를 try/catch로 감싸고 `src/mocks/browser.js` shim을 추가하여 임시 해결함. CI에서는 백엔드 `/health`로 스모크를 검증하도록 설정하여 프론트엔드의 추가 안정화와 무관하게 백엔드 게이트를 통과시킬 수 있음.
  - 권장 조치: 프론트엔드 런타임 500 원인(파일 마운트/빌드 시점 Race, dev-only imports)을 근본적으로 해결하고, `--legacy-peer-deps` 의존성 임시 정책을 장기 개선(패키지 교체/업그레이드)으로 대체할 것.

- 의존성 정책: 일부 패키지(`next-themes` 등)가 React 19와 peerDependency 충돌을 일으켜 임시로 `npm ci --legacy-peer-deps` 사용을 문서화함.
  - 권장 조치: 장기적으로 의존성 정리(대체 또는 패치 PR) 및 lockfile 통합 필요.

검증/테스트 요약:
- 자동 스모크(CI): 백엔드 `/health` 엔드포인트를 확인하는 GitHub Actions workflow를 추가함(파일: `.github/workflows/backend-smoke.yml`).
  - 동작: `BACKEND_URL` GitHub secret을 사용할 수 있고, 없을 경우 `http://localhost:8000`를 기본값으로 사용.
  - 성공 기준: HTTP 200을 3회 시도 내에 확인하면 통과.

다음 단계(권장 우선순위):
1. 관리자 권한 시나리오에 대한 자동화 테스트 추가 (app/tests/test_admin_*). (단기)
2. 프론트엔드 런타임 500 원인 분석 및 재현 가능한 CI 단계 추가(프론트빌드가 런타임에서도 안정적으로 동작하도록). (중기)
3. 의존성 정리 계획 수립: peerDependency 충돌 패키지 목록 작성 → 우선순위별 PR/교체 진행. (중기)
4. 알림/캠페인 예약 파이프라인 E2E 테스트 추가. (중기)

문서 업데이트 이력:
- 2025-08-14: 관리자 기능 점검 결과 추가 및 CI backend /health 스모크 워크플로우 추가.
